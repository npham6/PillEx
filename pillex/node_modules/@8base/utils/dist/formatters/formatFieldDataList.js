"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.formatFieldDataList = void 0;

var R = _interopRequireWildcard(require("ramda"));

var _constants = require("../constants");

var _formatFieldDataListItem = require("./formatFieldDataListItem");

var formatFieldDataList = function formatFieldDataList(type, fieldSchema, data, schema) {
  return R.pipe(R.map(function (item) {
    return (0, _formatFieldDataListItem.formatFieldDataListItem)(type, fieldSchema, item, schema);
  }), R.groupBy(R.prop('type')), R.mapObjIndexed(R.map(R.prop('data'))), R.when(R.allPass([R.complement(R.has('reconnect')), R.always(R.equals(type, _constants.MUTATION_TYPE.UPDATE))]), R.assoc('reconnect', [])))(data);
};

exports.formatFieldDataList = formatFieldDataList;